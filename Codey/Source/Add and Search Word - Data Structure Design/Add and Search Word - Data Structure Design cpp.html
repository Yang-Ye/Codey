<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888">// Time:  O(min(n, h)), per operation</span>
<span style="color: #888888">// Space: O(min(n, h))</span>

<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">WordDictionary</span> {
<span style="color: #008800; font-weight: bold">public</span><span style="color: #333333">:</span>
    <span style="color: #008800; font-weight: bold">struct</span> TrieNode {
        <span style="color: #333399; font-weight: bold">bool</span> isString <span style="color: #333333">=</span> <span style="color: #007020">false</span>;
        unordered_map<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">char</span>, TrieNode <span style="color: #333333">*&gt;</span> leaves;
    };

    WordDictionary() {
        root_ <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> TrieNode();
        root_<span style="color: #333333">-&gt;</span>isString <span style="color: #333333">=</span> <span style="color: #007020">true</span>;
    }

    <span style="color: #888888">// Adds a word into the data structure.</span>
    <span style="color: #333399; font-weight: bold">void</span> addWord(string word) {
            <span style="color: #008800; font-weight: bold">auto</span><span style="color: #333333">*</span> p <span style="color: #333333">=</span> root_;
            <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #008800; font-weight: bold">const</span> <span style="color: #008800; font-weight: bold">auto</span><span style="color: #333333">&amp;</span> <span style="color: #997700; font-weight: bold">c</span> : word) {
                <span style="color: #008800; font-weight: bold">if</span> (p<span style="color: #333333">-&gt;</span>leaves.find(c) <span style="color: #333333">==</span> p<span style="color: #333333">-&gt;</span>leaves.cend()) {
                    p<span style="color: #333333">-&gt;</span>leaves[c] <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> TrieNode;
                }
                p <span style="color: #333333">=</span> p<span style="color: #333333">-&gt;</span>leaves[c];
            }
            p<span style="color: #333333">-&gt;</span>isString <span style="color: #333333">=</span> <span style="color: #007020">true</span>;
    }

    <span style="color: #888888">// Returns if the word is in the data structure. A word could</span>
    <span style="color: #888888">// contain the dot character &#39;.&#39; to represent any one letter.</span>
    <span style="color: #333399; font-weight: bold">bool</span> search(string word) {
        <span style="color: #008800; font-weight: bold">return</span> searchWord(word, root_, <span style="color: #0000DD; font-weight: bold">0</span>);
    }

    <span style="color: #333399; font-weight: bold">bool</span> searchWord(string word, TrieNode <span style="color: #333333">*</span>node, <span style="color: #333399; font-weight: bold">int</span> s) {
        <span style="color: #008800; font-weight: bold">if</span> (s <span style="color: #333333">==</span> word.length()) {
            <span style="color: #008800; font-weight: bold">return</span> node<span style="color: #333333">-&gt;</span>isString;
        }
        <span style="color: #888888">// Match the char.</span>
        <span style="color: #008800; font-weight: bold">if</span> (node<span style="color: #333333">-&gt;</span>leaves.find(word[s]) <span style="color: #333333">!=</span> node<span style="color: #333333">-&gt;</span>leaves.end()) {
            <span style="color: #008800; font-weight: bold">return</span> searchWord(word, node<span style="color: #333333">-&gt;</span>leaves[word[s]], s <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>);
        } <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> (word[s] <span style="color: #333333">==</span> <span style="color: #0044DD">&#39;.&#39;</span>) {  <span style="color: #888888">// Skip the char.</span>
            <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #008800; font-weight: bold">const</span> <span style="color: #008800; font-weight: bold">auto</span><span style="color: #333333">&amp;</span> <span style="color: #997700; font-weight: bold">i</span> : node<span style="color: #333333">-&gt;</span>leaves) {
                <span style="color: #008800; font-weight: bold">if</span> (searchWord(word, i.second, s <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>)) {
                    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">true</span>;
                }
            }
        }
        <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">false</span>;
    }

<span style="color: #008800; font-weight: bold">private</span><span style="color: #333333">:</span>
    TrieNode <span style="color: #333333">*</span>root_;
};

<span style="color: #888888">// Your WordDictionary object will be instantiated and called as such:</span>
<span style="color: #888888">// WordDictionary wordDictionary;</span>
<span style="color: #888888">// wordDictionary.addWord(&quot;word&quot;);</span>
<span style="color: #888888">// wordDictionary.search(&quot;pattern&quot;);</span>
</pre></div>
