<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888"># Time:  O(n)</span>
<span style="color: #888888"># Space: O(1)</span>

<span style="color: #888888"># Given an integer array of size n, </span>
<span style="color: #888888"># find all elements that appear more than [n/3] times. </span>
<span style="color: #888888"># The algorithm should run in linear time and in O(1) space.</span>

<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution</span>(<span style="color: #007020">object</span>):
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">majorityElement</span>(<span style="color: #007020">self</span>, nums):
        <span style="color: #DD4422">&quot;&quot;&quot;</span>
<span style="color: #DD4422">        :type nums: List[int]</span>
<span style="color: #DD4422">        :rtype: List[int]</span>
<span style="color: #DD4422">        &quot;&quot;&quot;</span>
        k, n, cnts <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">3</span>, <span style="color: #007020">len</span>(nums), collections<span style="color: #333333">.</span>defaultdict(<span style="color: #007020">int</span>)

        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> nums:
            cnts[i] <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>
            <span style="color: #888888"># Detecting k items in cnts, at least one of them must have exactly</span>
            <span style="color: #888888"># one in it. We will discard those k items by one for each.</span>
            <span style="color: #888888"># This action keeps the same mojority numbers in the remaining numbers.</span>
            <span style="color: #888888"># Because if x / n  &gt; 1 / k is true, then (x - 1) / (n - k) &gt; 1 / k is also true.</span>
            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #007020">len</span>(cnts) <span style="color: #333333">==</span> k:
                <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> cnts<span style="color: #333333">.</span>keys():
                    cnts[j] <span style="color: #333333">-=</span> <span style="color: #0000DD; font-weight: bold">1</span>
                    <span style="color: #008800; font-weight: bold">if</span> cnts[j] <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span>:
                        <span style="color: #008800; font-weight: bold">del</span> cnts[j]

        <span style="color: #888888"># Resets cnts for the following counting.</span>
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> cnts<span style="color: #333333">.</span>keys():
            cnts[i] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>

        <span style="color: #888888"># Counts the occurrence of each candidate integer.</span>
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> nums:
            <span style="color: #008800; font-weight: bold">if</span> i <span style="color: #000000; font-weight: bold">in</span> cnts:
                cnts[i] <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>

        <span style="color: #888888"># Selects the integer which occurs &gt; [n / k] times.</span>
        result <span style="color: #333333">=</span> []
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> cnts<span style="color: #333333">.</span>keys():
            <span style="color: #008800; font-weight: bold">if</span> cnts[i] <span style="color: #333333">&gt;</span> n <span style="color: #333333">/</span> k:
                result<span style="color: #333333">.</span>append(i)

        <span style="color: #008800; font-weight: bold">return</span> result
</pre></div>
