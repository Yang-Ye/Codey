<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888"># Time:  O(n^2)</span>
<span style="color: #888888"># Space: O(n * d)</span>

<span style="color: #888888"># A sequence of numbers is called arithmetic if it consists of at least three elements</span>
<span style="color: #888888"># and if the difference between any two consecutive elements is the same.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># For example, these are arithmetic sequences:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># 1, 3, 5, 7, 9</span>
<span style="color: #888888"># 7, 7, 7, 7</span>
<span style="color: #888888"># 3, -1, -5, -9</span>
<span style="color: #888888"># The following sequence is not arithmetic.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># 1, 1, 2, 5, 7</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># A zero-indexed array A consisting of N numbers is given.</span>
<span style="color: #888888"># A subsequence slice of that array is any sequence of integers (P0, P1, ..., Pk)</span>
<span style="color: #888888"># such that 0  P0 &lt; P1 &lt; ... &lt; Pk &lt; N.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># A subsequence slice (P0, P1, ..., Pk) of array A is called arithmetic</span>
<span style="color: #888888"># if the sequence A[P0], A[P1], ..., A[Pk-1], A[Pk] is arithmetic. In particular, this means that k &gt;= 2.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># The function should return the number of arithmetic subsequence slices in the array A.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># The input contains N integers. Every integer is in the range of -2^31 and 2^31-1 and 0 &lt;= N &lt;= 1000.</span>
<span style="color: #888888"># The output is guaranteed to be less than 2^31-1.</span>
<span style="color: #888888">#</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Example:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Input: [2, 4, 6, 8, 10]</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Output: 7</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Explanation:</span>
<span style="color: #888888"># All arithmetic subsequence slices are:</span>
<span style="color: #888888"># [2,4,6]</span>
<span style="color: #888888"># [4,6,8]</span>
<span style="color: #888888"># [6,8,10]</span>
<span style="color: #888888"># [2,4,6,8]</span>
<span style="color: #888888"># [4,6,8,10]</span>
<span style="color: #888888"># [2,4,6,8,10]</span>
<span style="color: #888888"># [2,6,10]</span>

<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution</span>(<span style="color: #007020">object</span>):
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">numberOfArithmeticSlices</span>(<span style="color: #007020">self</span>, A):
        <span style="color: #DD4422">&quot;&quot;&quot;</span>
<span style="color: #DD4422">        :type A: List[int]</span>
<span style="color: #DD4422">        :rtype: int</span>
<span style="color: #DD4422">        &quot;&quot;&quot;</span>
        result <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
        dp <span style="color: #333333">=</span> [collections<span style="color: #333333">.</span>defaultdict(<span style="color: #007020">int</span>) <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(A))]
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>, <span style="color: #007020">len</span>(A)):
            <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(i):
                diff <span style="color: #333333">=</span> A[i]<span style="color: #333333">-</span>A[j]
                dp[i][diff] <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>
                <span style="color: #008800; font-weight: bold">if</span> diff <span style="color: #000000; font-weight: bold">in</span> dp[j]:
                    dp[i][diff] <span style="color: #333333">+=</span> dp[j][diff]
                    result <span style="color: #333333">+=</span> dp[j][diff]
        <span style="color: #008800; font-weight: bold">return</span> result
</pre></div>
