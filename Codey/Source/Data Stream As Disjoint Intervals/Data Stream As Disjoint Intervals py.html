<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888"># Time:  addNum: O(n), getIntervals: O(n), n is the number of disjoint intervals.</span>
<span style="color: #888888"># Space: O(n)</span>

<span style="color: #888888"># Given a data stream input of non-negative integers a1, a2, ..., an, ...,</span>
<span style="color: #888888"># summarize the numbers seen so far as a list of disjoint intervals.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># For example, suppose the integers from the data stream are 1, 3, 7, 2, 6,</span>
<span style="color: #888888"># ..., then the summary will be:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># [1, 1]</span>
<span style="color: #888888"># [1, 1], [3, 3]</span>
<span style="color: #888888"># [1, 1], [3, 3], [7, 7]</span>
<span style="color: #888888"># [1, 3], [7, 7]</span>
<span style="color: #888888"># [1, 3], [6, 7]</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Follow up:</span>
<span style="color: #888888"># What if there are lots of merges and the number of disjoint intervals</span>
<span style="color: #888888"># are small compared to the data stream&#39;s size?</span>

<span style="color: #888888"># Definition for an interval.</span>
<span style="color: #888888"># class Interval(object):</span>
<span style="color: #888888">#     def __init__(self, s=0, e=0):</span>
<span style="color: #888888">#         self.start = s</span>
<span style="color: #888888">#         self.end = e</span>

<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">SummaryRanges</span>(<span style="color: #007020">object</span>):

    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">__init__</span>(<span style="color: #007020">self</span>):
        <span style="color: #DD4422">&quot;&quot;&quot;</span>
<span style="color: #DD4422">        Initialize your data structure here.</span>
<span style="color: #DD4422">        &quot;&quot;&quot;</span>
        <span style="color: #007020">self</span><span style="color: #333333">.</span>__intervals <span style="color: #333333">=</span> []

    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">addNum</span>(<span style="color: #007020">self</span>, val):
        <span style="color: #DD4422">&quot;&quot;&quot;</span>
<span style="color: #DD4422">        :type val: int</span>
<span style="color: #DD4422">        :rtype: void</span>
<span style="color: #DD4422">        &quot;&quot;&quot;</span>
        <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">upper_bound</span>(nums, target):
            left, right <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #007020">len</span>(nums) <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>
            <span style="color: #008800; font-weight: bold">while</span> left <span style="color: #333333">&lt;=</span> right:
                mid <span style="color: #333333">=</span> left <span style="color: #333333">+</span> (right <span style="color: #333333">-</span> left) <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">2</span>
                <span style="color: #008800; font-weight: bold">if</span> nums[mid]<span style="color: #333333">.</span>start <span style="color: #333333">&gt;</span> target:
                    right <span style="color: #333333">=</span> mid <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>
                <span style="color: #008800; font-weight: bold">else</span>:
                    left <span style="color: #333333">=</span> mid <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>
            <span style="color: #008800; font-weight: bold">return</span> left

        i <span style="color: #333333">=</span> upper_bound(<span style="color: #007020">self</span><span style="color: #333333">.</span>__intervals, val)
        start, end <span style="color: #333333">=</span> val, val
        <span style="color: #008800; font-weight: bold">if</span> i <span style="color: #333333">!=</span> <span style="color: #0000DD; font-weight: bold">0</span> <span style="color: #000000; font-weight: bold">and</span> <span style="color: #007020">self</span><span style="color: #333333">.</span>__intervals[i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]<span style="color: #333333">.</span>end <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&gt;=</span> val:
            i <span style="color: #333333">-=</span> <span style="color: #0000DD; font-weight: bold">1</span>
        <span style="color: #008800; font-weight: bold">while</span> i <span style="color: #333333">!=</span> <span style="color: #007020">len</span>(<span style="color: #007020">self</span><span style="color: #333333">.</span>__intervals) <span style="color: #000000; font-weight: bold">and</span> \
              end <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&gt;=</span> <span style="color: #007020">self</span><span style="color: #333333">.</span>__intervals[i]<span style="color: #333333">.</span>start:
            start <span style="color: #333333">=</span> <span style="color: #007020">min</span>(start, <span style="color: #007020">self</span><span style="color: #333333">.</span>__intervals[i]<span style="color: #333333">.</span>start)
            end <span style="color: #333333">=</span> <span style="color: #007020">max</span>(end, <span style="color: #007020">self</span><span style="color: #333333">.</span>__intervals[i]<span style="color: #333333">.</span>end);
            <span style="color: #008800; font-weight: bold">del</span> <span style="color: #007020">self</span><span style="color: #333333">.</span>__intervals[i]
        <span style="color: #007020">self</span><span style="color: #333333">.</span>__intervals<span style="color: #333333">.</span>insert(i, Interval(start, end))

    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">getIntervals</span>(<span style="color: #007020">self</span>):
        <span style="color: #DD4422">&quot;&quot;&quot;</span>
<span style="color: #DD4422">        :rtype: List[Interval]</span>
<span style="color: #DD4422">        &quot;&quot;&quot;</span>
        <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">self</span><span style="color: #333333">.</span>__intervals


<span style="color: #888888"># Your SummaryRanges object will be instantiated and called as such:</span>
<span style="color: #888888"># obj = SummaryRanges()</span>
<span style="color: #888888"># obj.addNum(val)</span>
<span style="color: #888888"># param_2 = obj.getIntervals()</span>
</pre></div>
