<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">public <span style="color: #007020">int</span> lengthOfLongestSubstringTwoDistinct(String s) {
    <span style="color: #007020">int</span> <span style="color: #007020">max</span><span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>;
    HashMap<span style="color: #333333">&lt;</span>Character,Integer<span style="color: #333333">&gt;</span> <span style="color: #007020">map</span> <span style="color: #333333">=</span> new HashMap<span style="color: #333333">&lt;</span>Character, Integer<span style="color: #333333">&gt;</span>();
    <span style="color: #007020">int</span> start<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>;
 
    <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #007020">int</span> i<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>; i<span style="color: #333333">&lt;</span>s<span style="color: #333333">.</span>length(); i<span style="color: #333333">++</span>){
        char c <span style="color: #333333">=</span> s<span style="color: #333333">.</span>charAt(i);
        <span style="color: #008800; font-weight: bold">if</span>(<span style="color: #007020">map</span><span style="color: #333333">.</span>containsKey(c)){
            <span style="color: #007020">map</span><span style="color: #333333">.</span>put(c, <span style="color: #007020">map</span><span style="color: #333333">.</span>get(c)<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>);
        }<span style="color: #008800; font-weight: bold">else</span>{
            <span style="color: #007020">map</span><span style="color: #333333">.</span>put(c,<span style="color: #0000DD; font-weight: bold">1</span>);
        }
 
        <span style="color: #008800; font-weight: bold">if</span>(<span style="color: #007020">map</span><span style="color: #333333">.</span>size()<span style="color: #333333">&gt;</span><span style="color: #0000DD; font-weight: bold">2</span>){
            <span style="color: #007020">max</span> <span style="color: #333333">=</span> Math<span style="color: #333333">.</span>max(<span style="color: #007020">max</span>, i<span style="color: #333333">-</span>start);
 
            <span style="color: #008800; font-weight: bold">while</span>(<span style="color: #007020">map</span><span style="color: #333333">.</span>size()<span style="color: #333333">&gt;</span><span style="color: #0000DD; font-weight: bold">2</span>){
                char t <span style="color: #333333">=</span> s<span style="color: #333333">.</span>charAt(start);
                <span style="color: #007020">int</span> count <span style="color: #333333">=</span> <span style="color: #007020">map</span><span style="color: #333333">.</span>get(t);
                <span style="color: #008800; font-weight: bold">if</span>(count<span style="color: #333333">&gt;</span><span style="color: #0000DD; font-weight: bold">1</span>){
                    <span style="color: #007020">map</span><span style="color: #333333">.</span>put(t, count<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>);
                }<span style="color: #008800; font-weight: bold">else</span>{
                    <span style="color: #007020">map</span><span style="color: #333333">.</span>remove(t);
                }
                start<span style="color: #333333">++</span>;
            }
        }
    }
 
    <span style="color: #007020">max</span> <span style="color: #333333">=</span> Math<span style="color: #333333">.</span>max(<span style="color: #007020">max</span>, s<span style="color: #333333">.</span>length()<span style="color: #333333">-</span>start);
 
    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">max</span>;
}
</pre></div>
