<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888"># Time:  O(m + n)</span>
<span style="color: #888888"># Space: O(1)</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Implement wildcard pattern matching with support for &#39;?&#39; and &#39;*&#39;.</span>
<span style="color: #888888"># </span>
<span style="color: #888888"># &#39;?&#39; Matches any single character.</span>
<span style="color: #888888"># &#39;*&#39; Matches any sequence of characters (including the empty sequence).</span>
<span style="color: #888888"># </span>
<span style="color: #888888"># The matching should cover the entire input string (not partial).</span>
<span style="color: #888888"># </span>
<span style="color: #888888"># The function prototype should be:</span>
<span style="color: #888888"># bool isMatch(const char *s, const char *p)</span>
<span style="color: #888888"># </span>
<span style="color: #888888"># Some examples:</span>
<span style="color: #888888"># isMatch(&quot;aa&quot;,&quot;a&quot;) -&gt; false</span>
<span style="color: #888888"># isMatch(&quot;aa&quot;,&quot;aa&quot;) -&gt; true</span>
<span style="color: #888888"># isMatch(&quot;aaa&quot;,&quot;aa&quot;) -&gt; false</span>
<span style="color: #888888"># isMatch(&quot;aa&quot;, &quot;*&quot;) -&gt; true</span>
<span style="color: #888888"># isMatch(&quot;aa&quot;, &quot;a*&quot;) -&gt; true</span>
<span style="color: #888888"># isMatch(&quot;ab&quot;, &quot;?*&quot;) -&gt; true</span>
<span style="color: #888888"># isMatch(&quot;aab&quot;, &quot;c*a*b&quot;) -&gt; false</span>
<span style="color: #888888">#</span>

<span style="color: #888888"># iteration</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution</span>:
    <span style="color: #888888"># @param s, an input string</span>
    <span style="color: #888888"># @param p, a pattern string</span>
    <span style="color: #888888"># @return a boolean</span>
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">isMatch</span>(<span style="color: #007020">self</span>, s, p):
        p_ptr, s_ptr, last_s_ptr, last_p_ptr <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>, <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>
        <span style="color: #008800; font-weight: bold">while</span> s_ptr <span style="color: #333333">&lt;</span> <span style="color: #007020">len</span>(s):
            <span style="color: #008800; font-weight: bold">if</span> p_ptr <span style="color: #333333">&lt;</span> <span style="color: #007020">len</span>(p) <span style="color: #000000; font-weight: bold">and</span> (s[s_ptr] <span style="color: #333333">==</span> p[p_ptr] <span style="color: #000000; font-weight: bold">or</span> p[p_ptr] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;?&#39;</span>):
                s_ptr <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>
                p_ptr <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>
            <span style="color: #008800; font-weight: bold">elif</span> p_ptr <span style="color: #333333">&lt;</span> <span style="color: #007020">len</span>(p) <span style="color: #000000; font-weight: bold">and</span> p[p_ptr] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;*&#39;</span>:
                p_ptr <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>
                last_s_ptr <span style="color: #333333">=</span> s_ptr
                last_p_ptr <span style="color: #333333">=</span> p_ptr
            <span style="color: #008800; font-weight: bold">elif</span> last_p_ptr <span style="color: #333333">!=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>:
                last_s_ptr <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>
                s_ptr <span style="color: #333333">=</span> last_s_ptr
                p_ptr <span style="color: #333333">=</span> last_p_ptr
            <span style="color: #008800; font-weight: bold">else</span>:
                <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">False</span>
            
        <span style="color: #008800; font-weight: bold">while</span> p_ptr <span style="color: #333333">&lt;</span> <span style="color: #007020">len</span>(p) <span style="color: #000000; font-weight: bold">and</span> p[p_ptr] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;*&#39;</span>:
            p_ptr <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>
        
        <span style="color: #008800; font-weight: bold">return</span> p_ptr <span style="color: #333333">==</span> <span style="color: #007020">len</span>(p)
    
<span style="color: #888888"># dp with rolling window</span>
<span style="color: #888888"># Time:  O(m * n)</span>
<span style="color: #888888"># Space: O(m + n)</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution2</span>:
    <span style="color: #888888"># @return a boolean</span>
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">isMatch</span>(<span style="color: #007020">self</span>, s, p):
        k <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">2</span>
        result <span style="color: #333333">=</span> [[<span style="color: #007020">False</span> <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(p) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>)] <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(k)]

        result[<span style="color: #0000DD; font-weight: bold">0</span>][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> <span style="color: #007020">True</span>
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>, <span style="color: #007020">len</span>(p) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>):
            <span style="color: #008800; font-weight: bold">if</span> p[i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;*&#39;</span>:
                result[<span style="color: #0000DD; font-weight: bold">0</span>][i] <span style="color: #333333">=</span> result[<span style="color: #0000DD; font-weight: bold">0</span>][i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>,<span style="color: #007020">len</span>(s) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>):
            result[i <span style="color: #333333">%</span> k][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> <span style="color: #007020">False</span>
            <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>, <span style="color: #007020">len</span>(p) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>):
                <span style="color: #008800; font-weight: bold">if</span> p[j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">!=</span> <span style="background-color: #fff0f0">&#39;*&#39;</span>:
                    result[i <span style="color: #333333">%</span> k][j] <span style="color: #333333">=</span> result[(i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>) <span style="color: #333333">%</span> k][j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #000000; font-weight: bold">and</span> (s[i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">==</span> p[j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #000000; font-weight: bold">or</span> p[j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;?&#39;</span>)
                <span style="color: #008800; font-weight: bold">else</span>:
                    result[i <span style="color: #333333">%</span> k][j] <span style="color: #333333">=</span> result[i <span style="color: #333333">%</span> k][j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #000000; font-weight: bold">or</span> result[(i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>) <span style="color: #333333">%</span> k][j]
                    
        <span style="color: #008800; font-weight: bold">return</span> result[<span style="color: #007020">len</span>(s) <span style="color: #333333">%</span> k][<span style="color: #007020">len</span>(p)]

<span style="color: #888888"># dp</span>
<span style="color: #888888"># Time:  O(m * n)</span>
<span style="color: #888888"># Space: O(m * n)</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution3</span>:
    <span style="color: #888888"># @return a boolean</span>
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">isMatch</span>(<span style="color: #007020">self</span>, s, p):
        result <span style="color: #333333">=</span> [[<span style="color: #007020">False</span> <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(p) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>)] <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(s) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>)]

        result[<span style="color: #0000DD; font-weight: bold">0</span>][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> <span style="color: #007020">True</span>
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>, <span style="color: #007020">len</span>(p) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>):
            <span style="color: #008800; font-weight: bold">if</span> p[i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;*&#39;</span>:
                result[<span style="color: #0000DD; font-weight: bold">0</span>][i] <span style="color: #333333">=</span> result[<span style="color: #0000DD; font-weight: bold">0</span>][i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>,<span style="color: #007020">len</span>(s) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>):
            result[i][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> <span style="color: #007020">False</span>
            <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>, <span style="color: #007020">len</span>(p) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>):
                <span style="color: #008800; font-weight: bold">if</span> p[j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">!=</span> <span style="background-color: #fff0f0">&#39;*&#39;</span>:
                    result[i][j] <span style="color: #333333">=</span> result[i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>][j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #000000; font-weight: bold">and</span> (s[i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">==</span> p[j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #000000; font-weight: bold">or</span> p[j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;?&#39;</span>)
                <span style="color: #008800; font-weight: bold">else</span>:
                    result[i][j] <span style="color: #333333">=</span> result[i][j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #000000; font-weight: bold">or</span> result[i<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>][j]
                    
        <span style="color: #008800; font-weight: bold">return</span> result[<span style="color: #007020">len</span>(s)][<span style="color: #007020">len</span>(p)]


<span style="color: #888888"># recursive, slowest, TLE</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution4</span>:
    <span style="color: #888888"># @return a boolean</span>
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">isMatch</span>(<span style="color: #007020">self</span>, s, p):
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> p <span style="color: #000000; font-weight: bold">or</span> <span style="color: #000000; font-weight: bold">not</span> s:
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #000000; font-weight: bold">not</span> s <span style="color: #000000; font-weight: bold">and</span> <span style="color: #000000; font-weight: bold">not</span> p
        
        <span style="color: #008800; font-weight: bold">if</span> p[<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">!=</span> <span style="background-color: #fff0f0">&#39;*&#39;</span>:
            <span style="color: #008800; font-weight: bold">if</span> p[<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">==</span> s[<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #000000; font-weight: bold">or</span> p[<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;?&#39;</span>:
                <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">self</span><span style="color: #333333">.</span>isMatch(s[<span style="color: #0000DD; font-weight: bold">1</span>:], p[<span style="color: #0000DD; font-weight: bold">1</span>:])
            <span style="color: #008800; font-weight: bold">else</span>:
                <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">False</span>
        <span style="color: #008800; font-weight: bold">else</span>:
            <span style="color: #008800; font-weight: bold">while</span> <span style="color: #007020">len</span>(s) <span style="color: #333333">&gt;</span> <span style="color: #0000DD; font-weight: bold">0</span>:
                <span style="color: #008800; font-weight: bold">if</span> <span style="color: #007020">self</span><span style="color: #333333">.</span>isMatch(s, p[<span style="color: #0000DD; font-weight: bold">1</span>:]):
                    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">True</span>
                s <span style="color: #333333">=</span> s[<span style="color: #0000DD; font-weight: bold">1</span>:]
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">self</span><span style="color: #333333">.</span>isMatch(s, p[<span style="color: #0000DD; font-weight: bold">1</span>:])

<span style="color: #008800; font-weight: bold">if</span> __name__ <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;__main__&quot;</span>:
    <span style="color: #008800; font-weight: bold">print</span> Solution()<span style="color: #333333">.</span>isMatch(<span style="background-color: #fff0f0">&quot;aaaabaaaab&quot;</span>,<span style="background-color: #fff0f0">&quot;a*b*b&quot;</span>)
    <span style="color: #008800; font-weight: bold">print</span> Solution()<span style="color: #333333">.</span>isMatch(<span style="background-color: #fff0f0">&quot;aaaaaaaaaaaaab&quot;</span>, <span style="background-color: #fff0f0">&quot;a*a*a*a*a*a*a*a*a*a*c&quot;</span>)
    <span style="color: #008800; font-weight: bold">print</span> Solution()<span style="color: #333333">.</span>isMatch(<span style="background-color: #fff0f0">&quot;aa&quot;</span>,<span style="background-color: #fff0f0">&quot;a&quot;</span>)
    <span style="color: #008800; font-weight: bold">print</span> Solution()<span style="color: #333333">.</span>isMatch(<span style="background-color: #fff0f0">&quot;aa&quot;</span>,<span style="background-color: #fff0f0">&quot;aa&quot;</span>)
    <span style="color: #008800; font-weight: bold">print</span> Solution()<span style="color: #333333">.</span>isMatch(<span style="background-color: #fff0f0">&quot;aaa&quot;</span>,<span style="background-color: #fff0f0">&quot;aa&quot;</span>)
    <span style="color: #008800; font-weight: bold">print</span> Solution()<span style="color: #333333">.</span>isMatch(<span style="background-color: #fff0f0">&quot;aa&quot;</span>, <span style="background-color: #fff0f0">&quot;a*&quot;</span>)
    <span style="color: #008800; font-weight: bold">print</span> Solution()<span style="color: #333333">.</span>isMatch(<span style="background-color: #fff0f0">&quot;aa&quot;</span>, <span style="background-color: #fff0f0">&quot;?*&quot;</span>)
    <span style="color: #008800; font-weight: bold">print</span> Solution()<span style="color: #333333">.</span>isMatch(<span style="background-color: #fff0f0">&quot;ab&quot;</span>, <span style="background-color: #fff0f0">&quot;?*&quot;</span>)
    <span style="color: #008800; font-weight: bold">print</span> Solution()<span style="color: #333333">.</span>isMatch(<span style="background-color: #fff0f0">&quot;aab&quot;</span>, <span style="background-color: #fff0f0">&quot;c*a*b&quot;</span>)
</pre></div>
