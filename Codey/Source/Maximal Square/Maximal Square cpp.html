<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888">// Time:  O(n^2)</span>
<span style="color: #888888">// Space: O(n)</span>

<span style="color: #888888">// DP with rolling window.</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution</span> {
<span style="color: #008800; font-weight: bold">public</span><span style="color: #333333">:</span>
    <span style="color: #333399; font-weight: bold">int</span> maximalSquare(vector<span style="color: #333333">&lt;</span>vector<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">char</span><span style="color: #333333">&gt;&gt;&amp;</span> A) {
        <span style="color: #008800; font-weight: bold">if</span> (A.empty()) {
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
        }
        <span style="color: #008800; font-weight: bold">const</span> <span style="color: #333399; font-weight: bold">int</span> m <span style="color: #333333">=</span> A.size(), n <span style="color: #333333">=</span> A[<span style="color: #0000DD; font-weight: bold">0</span>].size();
        vector<span style="color: #333333">&lt;</span>vector<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">&gt;&gt;</span> size(<span style="color: #0000DD; font-weight: bold">2</span>, vector<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">&gt;</span>(n, <span style="color: #0000DD; font-weight: bold">0</span>));
        <span style="color: #333399; font-weight: bold">int</span> max_size <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;

        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; j <span style="color: #333333">&lt;</span> n; <span style="color: #333333">++</span>j) {
            size[<span style="color: #0000DD; font-weight: bold">0</span>][j] <span style="color: #333333">=</span> A[<span style="color: #0000DD; font-weight: bold">0</span>][j] <span style="color: #333333">-</span> <span style="color: #0044DD">&#39;0&#39;</span>;
            max_size <span style="color: #333333">=</span> max(max_size, size[<span style="color: #0000DD; font-weight: bold">0</span>][j]);
        }
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>; i <span style="color: #333333">&lt;</span> m; <span style="color: #333333">++</span>i) {
            size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> A[i][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">-</span> <span style="color: #0044DD">&#39;0&#39;</span>;
            <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>; j <span style="color: #333333">&lt;</span> n; <span style="color: #333333">++</span>j) {
                <span style="color: #008800; font-weight: bold">if</span> (A[i][j] <span style="color: #333333">==</span> <span style="color: #0044DD">&#39;1&#39;</span>) {
                    size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j] <span style="color: #333333">=</span> min(size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>], 
                                         min(size[(i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>) <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j], 
                                             size[(i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>) <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>])) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>;
                    max_size <span style="color: #333333">=</span> max(max_size, size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j]);
                } <span style="color: #008800; font-weight: bold">else</span> {
                    size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;
                }
            }
        }
        <span style="color: #008800; font-weight: bold">return</span> max_size <span style="color: #333333">*</span> max_size;
    }
};

<span style="color: #888888">// Time:  O(n^2)</span>
<span style="color: #888888">// Space: O(n^2)</span>
<span style="color: #888888">// DP.</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution2</span> {
<span style="color: #008800; font-weight: bold">public</span><span style="color: #333333">:</span>
    <span style="color: #333399; font-weight: bold">int</span> maximalSquare(vector<span style="color: #333333">&lt;</span>vector<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">char</span><span style="color: #333333">&gt;&gt;&amp;</span> A) {
        <span style="color: #008800; font-weight: bold">if</span> (A.empty()) {
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
        }
        <span style="color: #008800; font-weight: bold">const</span> <span style="color: #333399; font-weight: bold">int</span> m <span style="color: #333333">=</span> A.size(), n <span style="color: #333333">=</span> A[<span style="color: #0000DD; font-weight: bold">0</span>].size();
        vector<span style="color: #333333">&lt;</span>vector<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">&gt;&gt;</span> size(m, vector<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">&gt;</span>(n, <span style="color: #0000DD; font-weight: bold">0</span>));
        <span style="color: #333399; font-weight: bold">int</span> max_size <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;

        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; j <span style="color: #333333">&lt;</span> n; <span style="color: #333333">++</span>j) {
            size[<span style="color: #0000DD; font-weight: bold">0</span>][j] <span style="color: #333333">=</span> A[<span style="color: #0000DD; font-weight: bold">0</span>][j] <span style="color: #333333">-</span> <span style="color: #0044DD">&#39;0&#39;</span>;
            max_size <span style="color: #333333">=</span> max(max_size, size[<span style="color: #0000DD; font-weight: bold">0</span>][j]);
        }
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>; i <span style="color: #333333">&lt;</span> m; <span style="color: #333333">++</span>i) {
            size[i][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> A[i][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">-</span> <span style="color: #0044DD">&#39;0&#39;</span>;
            <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>; j <span style="color: #333333">&lt;</span> n; <span style="color: #333333">++</span>j) {
                <span style="color: #008800; font-weight: bold">if</span> (A[i][j] <span style="color: #333333">==</span> <span style="color: #0044DD">&#39;1&#39;</span>) {
                    size[i][j] <span style="color: #333333">=</span> min(size[i][j <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>], 
                                    min(size[i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>][j], 
                                        size[i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>][j <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>])) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>;
                    max_size <span style="color: #333333">=</span> max(max_size, size[i][j]);
                } <span style="color: #008800; font-weight: bold">else</span> {
                    size[i][j] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;
                }
            }
        }
        <span style="color: #008800; font-weight: bold">return</span> max_size <span style="color: #333333">*</span> max_size;
    }
};

<span style="color: #888888">// Time:  O(n^2)</span>
<span style="color: #888888">// Space: O(n^2)</span>
<span style="color: #888888">// DP.</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution3</span> {
<span style="color: #008800; font-weight: bold">public</span><span style="color: #333333">:</span>
    <span style="color: #008800; font-weight: bold">struct</span> MaxHW {
        <span style="color: #333399; font-weight: bold">int</span> h, w;
    };

    <span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">maximalSquare</span>(vector<span style="color: #333333">&lt;</span>vector<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">char</span><span style="color: #333333">&gt;&gt;&amp;</span> A) {
        <span style="color: #008800; font-weight: bold">if</span> (A.empty()) {
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
        }

        <span style="color: #888888">// DP table stores (h, w) for each (i, j).</span>
        vector<span style="color: #333333">&lt;</span>vector<span style="color: #333333">&lt;</span>MaxHW<span style="color: #333333">&gt;&gt;</span> table(A.size(), vector<span style="color: #333333">&lt;</span>MaxHW<span style="color: #333333">&gt;</span>(A.front().size()));
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> A.size() <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>; i <span style="color: #333333">&gt;=</span> <span style="color: #0000DD; font-weight: bold">0</span>; <span style="color: #333333">--</span>i) {
            <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> A[i].size() <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>; j <span style="color: #333333">&gt;=</span> <span style="color: #0000DD; font-weight: bold">0</span>; <span style="color: #333333">--</span>j) {
                <span style="color: #888888">// Find the largest h such that (i, j) to (i + h - 1, j) are feasible.</span>
                <span style="color: #888888">// Find the largest w such that (i, j) to (i, j + w - 1) are feasible.</span>
                table[i][j] <span style="color: #333333">=</span> A[i][j] <span style="color: #333333">==</span> <span style="color: #0044DD">&#39;1&#39;</span>
                                  <span style="color: #333333">?</span> MaxHW{i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&lt;</span> A.size() <span style="color: #333333">?</span> table[i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>][j].h <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">:</span> <span style="color: #0000DD; font-weight: bold">1</span>,
                                          j <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&lt;</span> A[i].size() <span style="color: #333333">?</span> table[i][j <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>].w <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">:</span> <span style="color: #0000DD; font-weight: bold">1</span>}
                                  <span style="color: #333333">:</span> MaxHW{<span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">0</span>};
            }
        }

        <span style="color: #888888">// A table stores the length of largest square for each (i, j).</span>
        vector<span style="color: #333333">&lt;</span>vector<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">&gt;&gt;</span> s(A.size(), vector<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">&gt;</span>(A.front().size(), <span style="color: #0000DD; font-weight: bold">0</span>));
        <span style="color: #333399; font-weight: bold">int</span> max_square_area <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> A.size() <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>; i <span style="color: #333333">&gt;=</span> <span style="color: #0000DD; font-weight: bold">0</span>; <span style="color: #333333">--</span>i) {
            <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> A[i].size() <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>; j <span style="color: #333333">&gt;=</span> <span style="color: #0000DD; font-weight: bold">0</span>; <span style="color: #333333">--</span>j) {
                <span style="color: #333399; font-weight: bold">int</span> side <span style="color: #333333">=</span> min(table[i][j].h, table[i][j].w);
                <span style="color: #008800; font-weight: bold">if</span> (A[i][j]) {
                    <span style="color: #888888">// Get the length of largest square with bottom-left corner (i, j).</span>
                    <span style="color: #008800; font-weight: bold">if</span> (i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&lt;</span> A.size() <span style="color: #333333">&amp;&amp;</span> j <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&lt;</span> A[i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>].size()) {
                        side <span style="color: #333333">=</span> min(s[i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>][j <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>, side);
                    }
                    s[i][j] <span style="color: #333333">=</span> side;
                    max_square_area <span style="color: #333333">=</span> max(max_square_area, side <span style="color: #333333">*</span> side);
                }
            }
        }
        <span style="color: #008800; font-weight: bold">return</span> max_square_area;
    }
};
</pre></div>
