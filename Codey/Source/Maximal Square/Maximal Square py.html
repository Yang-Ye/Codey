<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888"># Time:  O(n^2)</span>
<span style="color: #888888"># Space: O(n)</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Given a 2D binary matrix filled with 0&#39;s and 1&#39;s, </span>
<span style="color: #888888"># find the largest square containing all 1&#39;s and return its area.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># For example, given the following matrix:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># 1 0 1 0 0</span>
<span style="color: #888888"># 1 0 1 1 1</span>
<span style="color: #888888"># 1 1 1 1 1</span>
<span style="color: #888888"># 1 0 0 1 0</span>
<span style="color: #888888"># Return 4.</span>
<span style="color: #888888">#</span>

<span style="color: #888888"># DP with sliding window.</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution</span>:
    <span style="color: #888888"># @param {character[][]} matrix</span>
    <span style="color: #888888"># @return {integer}</span>
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">maximalSquare</span>(<span style="color: #007020">self</span>, matrix):
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> matrix:
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>

        m, n <span style="color: #333333">=</span> <span style="color: #007020">len</span>(matrix), <span style="color: #007020">len</span>(matrix[<span style="color: #0000DD; font-weight: bold">0</span>])
        size <span style="color: #333333">=</span> [[<span style="color: #0000DD; font-weight: bold">0</span> <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(n)] <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">2</span>)]
        max_size <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
        
        <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(n):
            <span style="color: #008800; font-weight: bold">if</span> matrix[<span style="color: #0000DD; font-weight: bold">0</span>][j] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;1&#39;</span>:
                size[<span style="color: #0000DD; font-weight: bold">0</span>][j] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>
            max_size <span style="color: #333333">=</span> <span style="color: #007020">max</span>(max_size, size[<span style="color: #0000DD; font-weight: bold">0</span>][j])
            
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>, m):
            <span style="color: #008800; font-weight: bold">if</span> matrix[i][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;1&#39;</span>:
                size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>
            <span style="color: #008800; font-weight: bold">else</span>:
                size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
            <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>, n):
                <span style="color: #008800; font-weight: bold">if</span> matrix[i][j] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;1&#39;</span>:
                    size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j] <span style="color: #333333">=</span> <span style="color: #007020">min</span>(size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>], \
                                         size[(i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>) <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j], \
                                         size[(i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>) <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>]) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>
                    max_size <span style="color: #333333">=</span> <span style="color: #007020">max</span>(max_size, size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j])
                <span style="color: #008800; font-weight: bold">else</span>:
                    size[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">2</span>][j] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
                    
        <span style="color: #008800; font-weight: bold">return</span> max_size <span style="color: #333333">*</span> max_size


<span style="color: #888888"># Time:  O(n^2)</span>
<span style="color: #888888"># Space: O(n^2)</span>
<span style="color: #888888"># DP.</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution2</span>:
    <span style="color: #888888"># @param {character[][]} matrix</span>
    <span style="color: #888888"># @return {integer}</span>
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">maximalSquare</span>(<span style="color: #007020">self</span>, matrix):
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> matrix:
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>

        m, n <span style="color: #333333">=</span> <span style="color: #007020">len</span>(matrix), <span style="color: #007020">len</span>(matrix[<span style="color: #0000DD; font-weight: bold">0</span>])
        size <span style="color: #333333">=</span> [[<span style="color: #0000DD; font-weight: bold">0</span> <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(n)] <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(m)]
        max_size <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
        
        <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(n):
            <span style="color: #008800; font-weight: bold">if</span> matrix[<span style="color: #0000DD; font-weight: bold">0</span>][j] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;1&#39;</span>:
                size[<span style="color: #0000DD; font-weight: bold">0</span>][j] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>
            max_size <span style="color: #333333">=</span> <span style="color: #007020">max</span>(max_size, size[<span style="color: #0000DD; font-weight: bold">0</span>][j])
            
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>, m):
            <span style="color: #008800; font-weight: bold">if</span> matrix[i][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;1&#39;</span>:
                size[i][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>
            <span style="color: #008800; font-weight: bold">else</span>:
                size[i][<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
            <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #0000DD; font-weight: bold">1</span>, n):
                <span style="color: #008800; font-weight: bold">if</span> matrix[i][j] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;1&#39;</span>:
                    size[i][j] <span style="color: #333333">=</span> <span style="color: #007020">min</span>(size[i][j <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>],  \
                                     size[i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>][j],  \
                                     size[i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>][j <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>]) <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>
                    max_size <span style="color: #333333">=</span> <span style="color: #007020">max</span>(max_size, size[i][j])
                <span style="color: #008800; font-weight: bold">else</span>:
                    size[i][j] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
                    
        <span style="color: #008800; font-weight: bold">return</span> max_size <span style="color: #333333">*</span> max_size
        
        
<span style="color: #888888"># Time:  O(n^2)</span>
<span style="color: #888888"># Space: O(n^2)</span>
<span style="color: #888888"># DP.</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution3</span>:
    <span style="color: #888888"># @param {character[][]} matrix</span>
    <span style="color: #888888"># @return {integer}</span>
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">maximalSquare</span>(<span style="color: #007020">self</span>, matrix):
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> matrix:
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>
        
        H, W <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">1</span>
        <span style="color: #888888"># DP table stores (h, w) for each (i, j).</span>
        table <span style="color: #333333">=</span> [[[<span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(matrix[<span style="color: #0000DD; font-weight: bold">0</span>]))] \
                         <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(matrix))]
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">reversed</span>(<span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(matrix))):
            <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">reversed</span>(<span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(matrix[i]))):
                <span style="color: #888888"># Find the largest h such that (i, j) to (i + h - 1, j) are feasible.</span>
                <span style="color: #888888"># Find the largest w such that (i, j) to (i, j + w - 1) are feasible.</span>
                <span style="color: #008800; font-weight: bold">if</span> matrix[i][j] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;1&#39;</span>:
                    h, w <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>, <span style="color: #0000DD; font-weight: bold">1</span>
                    <span style="color: #008800; font-weight: bold">if</span> i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&lt;</span> <span style="color: #007020">len</span>(matrix):
                        h <span style="color: #333333">=</span> table[i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>][j][H] <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>
                    <span style="color: #008800; font-weight: bold">if</span> j <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&lt;</span> <span style="color: #007020">len</span>(matrix[i]):
                        w <span style="color: #333333">=</span> table[i][j <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>][W] <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>
                    table[i][j] <span style="color: #333333">=</span> [h, w]
        
        <span style="color: #888888"># A table stores the length of largest square for each (i, j).</span>
        s <span style="color: #333333">=</span> [[<span style="color: #0000DD; font-weight: bold">0</span> <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(matrix[<span style="color: #0000DD; font-weight: bold">0</span>]))] \
                <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(matrix))]
        max_square_area <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
        <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">reversed</span>(<span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(matrix))):
            <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">reversed</span>(<span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(matrix[i]))):
                side <span style="color: #333333">=</span> <span style="color: #007020">min</span>(table[i][j][H], table[i][j][W])
                <span style="color: #008800; font-weight: bold">if</span> matrix[i][j] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;1&#39;</span>:
                    <span style="color: #888888"># Get the length of largest square with bottom-left corner (i, j).</span>
                    <span style="color: #008800; font-weight: bold">if</span> i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&lt;</span> <span style="color: #007020">len</span>(matrix) <span style="color: #000000; font-weight: bold">and</span> j <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&lt;</span> <span style="color: #007020">len</span>(matrix[i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>]):
                        side <span style="color: #333333">=</span> <span style="color: #007020">min</span>(s[i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>][j <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>, side)
                    s[i][j] <span style="color: #333333">=</span> side
                    max_square_area <span style="color: #333333">=</span> <span style="color: #007020">max</span>(max_square_area, side <span style="color: #333333">*</span> side)
                    
        <span style="color: #008800; font-weight: bold">return</span> max_square_area;
  
</pre></div>
