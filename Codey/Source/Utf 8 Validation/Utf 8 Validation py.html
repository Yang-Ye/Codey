<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888"># Time:  O(n)</span>
<span style="color: #888888"># Space: O(1)</span>

<span style="color: #888888"># A character in UTF8 can be from 1 to 4 bytes long, subjected to the following rules:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># For 1-byte character, the first bit is a 0, followed by its unicode code.</span>
<span style="color: #888888"># For n-bytes character, the first n-bits are all one&#39;s, the n+1 bit is 0,</span>
<span style="color: #888888"># followed by n-1 bytes with most significant 2 bits being 10.</span>
<span style="color: #888888"># This is how the UTF-8 encoding would work:</span>
<span style="color: #888888">#</span>
<span style="color: #888888">#   Char. number range  |        UTF-8 octet sequence</span>
<span style="color: #888888">#       (hexadecimal)    |              (binary)</span>
<span style="color: #888888">#   --------------------+---------------------------------------------</span>
<span style="color: #888888">#   0000 0000-0000 007F | 0xxxxxxx</span>
<span style="color: #888888">#   0000 0080-0000 07FF | 110xxxxx 10xxxxxx</span>
<span style="color: #888888">#   0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx</span>
<span style="color: #888888">#   0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</span>
<span style="color: #888888"># Given an array of integers representing the data, return whether it is a valid utf-8 encoding.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Note:</span>
<span style="color: #888888"># The input is an array of integers.</span>
<span style="color: #888888"># Only the least significant 8 bits of each integer is used to store the data.</span>
<span style="color: #888888"># This means each integer represents only 1 byte of data.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Example 1:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># data = [197, 130, 1], which represents the octet sequence: 11000101 10000010 00000001.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Return true.</span>
<span style="color: #888888"># It is a valid utf-8 encoding for a 2-bytes character followed by a 1-byte character.</span>
<span style="color: #888888"># Example 2:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># data = [235, 140, 4], which represented the octet sequence: 11101011 10001100 00000100.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Return false.</span>
<span style="color: #888888"># The first 3 bits are all one&#39;s and the 4th bit is 0 means it is a 3-bytes character.</span>
<span style="color: #888888"># The next byte is a continuation byte which starts with 10 and that&#39;s correct.</span>
<span style="color: #888888"># But the second continuation byte does not start with 10, so it is invalid.</span>

<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution</span>(<span style="color: #007020">object</span>):
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">validUtf8</span>(<span style="color: #007020">self</span>, data):
        <span style="color: #DD4422">&quot;&quot;&quot;</span>
<span style="color: #DD4422">        :type data: List[int]</span>
<span style="color: #DD4422">        :rtype: bool</span>
<span style="color: #DD4422">        &quot;&quot;&quot;</span>
        count <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
        <span style="color: #008800; font-weight: bold">for</span> c <span style="color: #000000; font-weight: bold">in</span> data:
            <span style="color: #008800; font-weight: bold">if</span> count <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span>:
                <span style="color: #008800; font-weight: bold">if</span> (c <span style="color: #333333">&gt;&gt;</span> <span style="color: #0000DD; font-weight: bold">5</span>) <span style="color: #333333">==</span> <span style="color: #6600EE; font-weight: bold">0b110</span>:
                    count <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>
                <span style="color: #008800; font-weight: bold">elif</span> (c <span style="color: #333333">&gt;&gt;</span> <span style="color: #0000DD; font-weight: bold">4</span>) <span style="color: #333333">==</span> <span style="color: #6600EE; font-weight: bold">0b1110</span>:
                    count <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">2</span>
                <span style="color: #008800; font-weight: bold">elif</span> (c <span style="color: #333333">&gt;&gt;</span> <span style="color: #0000DD; font-weight: bold">3</span>) <span style="color: #333333">==</span> <span style="color: #6600EE; font-weight: bold">0b11110</span>:
                    count <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">3</span>
                <span style="color: #008800; font-weight: bold">elif</span> (c <span style="color: #333333">&gt;&gt;</span> <span style="color: #0000DD; font-weight: bold">7</span>):
                    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">False</span>
            <span style="color: #008800; font-weight: bold">else</span>:
                <span style="color: #008800; font-weight: bold">if</span> (c <span style="color: #333333">&gt;&gt;</span> <span style="color: #0000DD; font-weight: bold">6</span>) <span style="color: #333333">!=</span> <span style="color: #6600EE; font-weight: bold">0b10</span>:
                    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">False</span>
                count <span style="color: #333333">-=</span> <span style="color: #0000DD; font-weight: bold">1</span>
        <span style="color: #008800; font-weight: bold">return</span> count <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span>
</pre></div>
