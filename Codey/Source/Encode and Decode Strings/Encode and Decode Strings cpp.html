<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888">// Time:  O(n)</span>
<span style="color: #888888">// Space: O(1)</span>

<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Codec</span> {
<span style="color: #008800; font-weight: bold">public</span><span style="color: #333333">:</span>

    <span style="color: #888888">// Encodes a list of strings to a single string.</span>
    string encode(vector<span style="color: #333333">&lt;</span>string<span style="color: #333333">&gt;&amp;</span> strs) {
        string s;
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">size_t</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> strs.size(); <span style="color: #333333">++</span>i) {
            <span style="color: #333399; font-weight: bold">size_t</span> len <span style="color: #333333">=</span> strs[i].length();
            string tmp;
            <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">size_t</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>, mask <span style="color: #333333">=</span> <span style="color: #005588; font-weight: bold">0xff</span>; i <span style="color: #333333">&lt;</span> <span style="color: #008800; font-weight: bold">sizeof</span>(<span style="color: #333399; font-weight: bold">size_t</span>); <span style="color: #333333">++</span>i, mask <span style="color: #333333">&lt;&lt;=</span> <span style="color: #0000DD; font-weight: bold">8</span>) {
                tmp.push_back(len <span style="color: #333333">&amp;</span> mask);
            }
            reverse(tmp.begin(), tmp.end());
            s.append(tmp);
            s.append(strs[i]);
        }
    
        <span style="color: #008800; font-weight: bold">return</span> s;
    }
    
    <span style="color: #888888">// Decodes a single string to a list of strings.</span>
    vector<span style="color: #333333">&lt;</span>string<span style="color: #333333">&gt;</span> decode(string s) {
        vector<span style="color: #333333">&lt;</span>string<span style="color: #333333">&gt;</span> strs;
        <span style="color: #333399; font-weight: bold">size_t</span> pos <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;
    
        <span style="color: #008800; font-weight: bold">while</span> (pos <span style="color: #333333">+</span> <span style="color: #008800; font-weight: bold">sizeof</span>(<span style="color: #333399; font-weight: bold">size_t</span>) <span style="color: #333333">&lt;=</span> s.length()) {
            <span style="color: #333399; font-weight: bold">size_t</span> len <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;
            <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">size_t</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> <span style="color: #008800; font-weight: bold">sizeof</span>(<span style="color: #333399; font-weight: bold">size_t</span>); <span style="color: #333333">++</span>i) {
                len <span style="color: #333333">&lt;&lt;=</span> <span style="color: #0000DD; font-weight: bold">8</span>;
                len <span style="color: #333333">+=</span> <span style="color: #008800; font-weight: bold">static_cast</span><span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">unsigned</span> <span style="color: #333399; font-weight: bold">char</span><span style="color: #333333">&gt;</span>(s[pos<span style="color: #333333">++</span>]);
            } 
    
            strs.push_back(s.substr(pos, len));
            pos <span style="color: #333333">+=</span> len;
        }
    
        <span style="color: #008800; font-weight: bold">return</span> strs;
    }
};
</pre></div>
