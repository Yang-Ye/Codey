<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888"># Time:  O(logn)</span>
<span style="color: #888888"># Space: O(1)</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Given an integer n, count the total number of digit 1 appearing</span>
<span style="color: #888888"># in all non-negative integers less than or equal to n.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># For example:</span>
<span style="color: #888888"># Given n = 13,</span>
<span style="color: #888888"># Return 6, because digit 1 occurred in the following numbers:</span>
<span style="color: #888888">#  1, 10, 11, 12, 13.</span>
<span style="color: #888888">#</span>

<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution</span>:
    <span style="color: #888888"># @param {integer} n</span>
    <span style="color: #888888"># @return {integer}</span>
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">countDigitOne</span>(<span style="color: #007020">self</span>, n):
        k <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>;
        cnt, multiplier, left_part <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">1</span>, n

        <span style="color: #008800; font-weight: bold">while</span> left_part <span style="color: #333333">&gt;</span> <span style="color: #0000DD; font-weight: bold">0</span>:
            <span style="color: #888888"># split number into: left_part, curr, right_part</span>
            curr <span style="color: #333333">=</span> left_part <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">10</span>
            right_part <span style="color: #333333">=</span> n <span style="color: #333333">%</span> multiplier

            <span style="color: #888888"># count of (c000 ~ oooc000) = (ooo + (k &lt; curr)? 1 : 0) * 1000</span>
            cnt <span style="color: #333333">+=</span> (left_part <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">10</span> <span style="color: #333333">+</span> (k <span style="color: #333333">&lt;</span> curr)) <span style="color: #333333">*</span> multiplier

            <span style="color: #888888"># if k == 0, oooc000 = (ooo - 1) * 1000</span>
            <span style="color: #008800; font-weight: bold">if</span> k <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span> <span style="color: #000000; font-weight: bold">and</span> multiplier <span style="color: #333333">&gt;</span> <span style="color: #0000DD; font-weight: bold">1</span>:
                cnt <span style="color: #333333">-=</span> multiplier

            <span style="color: #888888"># count of (oook000 ~ oookxxx): count += xxx + 1</span>
            <span style="color: #008800; font-weight: bold">if</span> curr <span style="color: #333333">==</span> k:
                cnt <span style="color: #333333">+=</span> right_part <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>

            left_part <span style="color: #333333">/=</span> <span style="color: #0000DD; font-weight: bold">10</span>
            multiplier <span style="color: #333333">*=</span> <span style="color: #0000DD; font-weight: bold">10</span>

        <span style="color: #008800; font-weight: bold">return</span> cnt
</pre></div>
