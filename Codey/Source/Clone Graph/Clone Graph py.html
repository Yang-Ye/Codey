<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888"># Time:  O(n)</span>
<span style="color: #888888"># Space: O(n)</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Clone an undirected graph. Each node in the graph contains a label and a list of its neighbors.</span>
<span style="color: #888888"># </span>
<span style="color: #888888"># </span>
<span style="color: #888888"># OJ&#39;s undirected graph serialization:</span>
<span style="color: #888888"># Nodes are labeled uniquely.</span>
<span style="color: #888888"># </span>
<span style="color: #888888"># We use # as a separator for each node, and , as a separator for node label and each neighbor of the node.</span>
<span style="color: #888888"># As an example, consider the serialized graph {0,1,2#1,2#2,2}.</span>
<span style="color: #888888"># </span>
<span style="color: #888888"># The graph has a total of three nodes, and therefore contains three parts as separated by #.</span>
<span style="color: #888888"># </span>
<span style="color: #888888"># First node is labeled as 0. Connect node 0 to both nodes 1 and 2.</span>
<span style="color: #888888"># Second node is labeled as 1. Connect node 1 to node 2.</span>
<span style="color: #888888"># Third node is labeled as 2. Connect node 2 to node 2 (itself), thus forming a self-cycle.</span>
<span style="color: #888888"># Visually, the graph looks like the following:</span>
<span style="color: #888888"># </span>
<span style="color: #888888">#        1</span>
<span style="color: #888888">#       / \</span>
<span style="color: #888888">#      /   \</span>
<span style="color: #888888">#     0 --- 2</span>
<span style="color: #888888">#          / \</span>
<span style="color: #888888">#          \_/</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Definition for a undirected graph node</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">UndirectedGraphNode</span>:
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">__init__</span>(<span style="color: #007020">self</span>, x):
        <span style="color: #007020">self</span><span style="color: #333333">.</span>label <span style="color: #333333">=</span> x
        <span style="color: #007020">self</span><span style="color: #333333">.</span>neighbors <span style="color: #333333">=</span> []

<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution</span>:
    <span style="color: #888888"># @param node, a undirected graph node</span>
    <span style="color: #888888"># @return a undirected graph node</span>
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">cloneGraph</span>(<span style="color: #007020">self</span>, node):
        <span style="color: #008800; font-weight: bold">if</span> node <span style="color: #000000; font-weight: bold">is</span> <span style="color: #007020">None</span>:
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">None</span>
        cloned_node <span style="color: #333333">=</span> UndirectedGraphNode(node<span style="color: #333333">.</span>label)
        cloned, queue <span style="color: #333333">=</span> {node:cloned_node}, [node]
        
        <span style="color: #008800; font-weight: bold">while</span> queue:
            current <span style="color: #333333">=</span> queue<span style="color: #333333">.</span>pop()
            <span style="color: #008800; font-weight: bold">for</span> neighbor <span style="color: #000000; font-weight: bold">in</span> current<span style="color: #333333">.</span>neighbors:
                <span style="color: #008800; font-weight: bold">if</span> neighbor <span style="color: #000000; font-weight: bold">not</span> <span style="color: #000000; font-weight: bold">in</span> cloned:
                    queue<span style="color: #333333">.</span>append(neighbor)
                    cloned_neighbor <span style="color: #333333">=</span> UndirectedGraphNode(neighbor<span style="color: #333333">.</span>label)
                    cloned[neighbor] <span style="color: #333333">=</span> cloned_neighbor
                cloned[current]<span style="color: #333333">.</span>neighbors<span style="color: #333333">.</span>append(cloned[neighbor])
        <span style="color: #008800; font-weight: bold">return</span> cloned[node]
</pre></div>
