<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888"># Time:  O(n)</span>
<span style="color: #888888"># Space: O(h)</span>

<span style="color: #888888"># Given a nested list of integers represented as a string, implement a parser to deserialize it.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Each element is either an integer, or a list -- whose elements may also be integers or other lists.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Note: You may assume that the string is well-formed:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># String is non-empty.</span>
<span style="color: #888888"># String does not contain white spaces.</span>
<span style="color: #888888"># String contains only digits 0-9, [, - ,, ].</span>
<span style="color: #888888"># Example 1:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Given s = &quot;324&quot;,</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># You should return a NestedInteger object which contains a single integer 324.</span>
<span style="color: #888888"># Example 2:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Given s = &quot;[123,[456,[789]]]&quot;,</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Return a NestedInteger object containing a nested list with 2 elements:</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># 1. An integer containing value 123.</span>
<span style="color: #888888"># 2. A nested list containing two elements:</span>
<span style="color: #888888">#     i.  An integer containing value 456.</span>
<span style="color: #888888">#     ii. A nested list with one element:</span>
<span style="color: #888888">#          a. An integer containing value 789.</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># &quot;&quot;&quot;</span>
<span style="color: #888888"># This is the interface that allows for creating nested lists.</span>
<span style="color: #888888"># You should not implement it, or speculate about its implementation</span>
<span style="color: #888888"># &quot;&quot;&quot;</span>
<span style="color: #888888">#class NestedInteger(object):</span>
<span style="color: #888888">#    def __init__(self, value=None):</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#        If value is not specified, initializes an empty list.</span>
<span style="color: #888888">#        Otherwise initializes a single integer equal to value.</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#</span>
<span style="color: #888888">#    def isInteger(self):</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#        @return True if this NestedInteger holds a single integer, rather than a nested list.</span>
<span style="color: #888888">#        :rtype bool</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#</span>
<span style="color: #888888">#    def add(self, elem):</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#        Set this NestedInteger to hold a nested list and adds a nested integer elem to it.</span>
<span style="color: #888888">#        :rtype void</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#</span>
<span style="color: #888888">#    def setInteger(self, value):</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#        Set this NestedInteger to hold a single integer equal to value.</span>
<span style="color: #888888">#        :rtype void</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#</span>
<span style="color: #888888">#    def getInteger(self):</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#        @return the single integer that this NestedInteger holds, if it holds a single integer</span>
<span style="color: #888888">#        Return None if this NestedInteger holds a nested list</span>
<span style="color: #888888">#        :rtype int</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#</span>
<span style="color: #888888">#    def getList(self):</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>
<span style="color: #888888">#        @return the nested list that this NestedInteger holds, if it holds a nested list</span>
<span style="color: #888888">#        Return None if this NestedInteger holds a single integer</span>
<span style="color: #888888">#        :rtype List[NestedInteger]</span>
<span style="color: #888888">#        &quot;&quot;&quot;</span>


<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution</span>(<span style="color: #007020">object</span>):
    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">deserialize</span>(<span style="color: #007020">self</span>, s):
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> s:
            <span style="color: #008800; font-weight: bold">return</span> NestedInteger()

        <span style="color: #008800; font-weight: bold">if</span> s[<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">!=</span> <span style="background-color: #fff0f0">&#39;[&#39;</span>:
            <span style="color: #008800; font-weight: bold">return</span> NestedInteger(<span style="color: #007020">int</span>(s))

        stk <span style="color: #333333">=</span> []

        i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
        <span style="color: #008800; font-weight: bold">for</span> j <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">xrange</span>(<span style="color: #007020">len</span>(s)):
            <span style="color: #008800; font-weight: bold">if</span> s[j] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;[&#39;</span>:
                stk <span style="color: #333333">+=</span> NestedInteger(),
                i <span style="color: #333333">=</span> j<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>
            <span style="color: #008800; font-weight: bold">elif</span> s[j] <span style="color: #000000; font-weight: bold">in</span> <span style="background-color: #fff0f0">&#39;,]&#39;</span>:
                <span style="color: #008800; font-weight: bold">if</span> s[j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]<span style="color: #333333">.</span>isdigit():
                    stk[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]<span style="color: #333333">.</span>add(NestedInteger(<span style="color: #007020">int</span>(s[i:j])))
                <span style="color: #008800; font-weight: bold">if</span> s[j] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&#39;]&#39;</span> <span style="color: #000000; font-weight: bold">and</span> <span style="color: #007020">len</span>(stk) <span style="color: #333333">&gt;</span> <span style="color: #0000DD; font-weight: bold">1</span>:
                    cur <span style="color: #333333">=</span> stk[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]
                    stk<span style="color: #333333">.</span>pop();
                    stk[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]<span style="color: #333333">.</span>add(cur)
                i <span style="color: #333333">=</span> j<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>

        <span style="color: #008800; font-weight: bold">return</span> stk[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]
</pre></div>
