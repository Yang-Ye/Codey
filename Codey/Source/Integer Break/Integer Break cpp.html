<!-- HTML generated by Yang Ye --><div style="background: #ffffff; overflow:auto;width:auto;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span></span><span style="color: #888888">// Time:  O(logn), pow is O(logn).</span>
<span style="color: #888888">// Space: O(1)</span>

<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution</span> {
<span style="color: #008800; font-weight: bold">public</span><span style="color: #333333">:</span>
    <span style="color: #333399; font-weight: bold">int</span> integerBreak(<span style="color: #333399; font-weight: bold">int</span> n) {
        <span style="color: #008800; font-weight: bold">if</span> (n <span style="color: #333333">&lt;</span> <span style="color: #0000DD; font-weight: bold">4</span>) {
            <span style="color: #008800; font-weight: bold">return</span> n <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>;
        }

        <span style="color: #888888">// Proof.</span>
        <span style="color: #888888">// 1. Let n = a1 + a2 + ... + ak, product = a1 * a2 * ... * ak</span>
        <span style="color: #888888">//     - For each ai &gt;= 4, we can always maximize the product by:</span>
        <span style="color: #888888">//       ai &lt;= 2 * (ai - 2)</span>
        <span style="color: #888888">//     - For each aj &gt;= 5, we can always maximize the product by:</span>
        <span style="color: #888888">//       aj &lt;= 3 * (aj - 3)</span>
        <span style="color: #888888">// </span>
        <span style="color: #888888">//    Conclusion 1:</span>
        <span style="color: #888888">//     - For n &gt;= 4, the max of the product must be in the form of</span>
        <span style="color: #888888">//       3^a * 2^b, s.t. 3a + 2b = n</span>
        <span style="color: #888888">//</span>
        <span style="color: #888888">// 2. To maximize the product = 3^a * 2^b s.t. 3a + 2b = n</span>
        <span style="color: #888888">//     - For each b &gt;= 3, we can always maximize the product by:</span>
        <span style="color: #888888">//       3^a * 2^b &lt;= 3^(a+2) * 2^(b-3) s.t. 3(a+2) + 2(b-3) = n</span>
        <span style="color: #888888">//</span>
        <span style="color: #888888">//    Conclusion 2:</span>
        <span style="color: #888888">//     - For n &gt;= 4, the max of the product must be in the form of</span>
        <span style="color: #888888">//       3^Q * 2^R, 0 &lt;= R &lt; 3 s.t. 3Q + 2R = n</span>
        <span style="color: #888888">//       i.e.</span>
        <span style="color: #888888">//         if n = 3Q + 0,   the max of the product = 3^Q * 2^0</span>
        <span style="color: #888888">//         if n = 3Q + 2,   the max of the product = 3^Q * 2^1</span>
        <span style="color: #888888">//         if n = 3Q + 2*2, the max of the product = 3^Q * 2^2</span>

        <span style="color: #333399; font-weight: bold">int</span> res <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;
        <span style="color: #008800; font-weight: bold">if</span> (n <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">3</span> <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span>) {         <span style="color: #888888">// n = 3Q + 0, the max is 3^Q * 2^0</span>
            res <span style="color: #333333">=</span> pow(<span style="color: #0000DD; font-weight: bold">3</span>, n <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">3</span>);
        } <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> (n <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">3</span> <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">2</span>) {  <span style="color: #888888">// n = 3Q + 2, the max is 3^Q * 2^1</span>
            res <span style="color: #333333">=</span> pow(<span style="color: #0000DD; font-weight: bold">3</span>, n <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">3</span>) <span style="color: #333333">*</span> <span style="color: #0000DD; font-weight: bold">2</span>;
        } <span style="color: #008800; font-weight: bold">else</span> {                  <span style="color: #888888">// n = 3Q + 4, the max is 3^Q * 2^2</span>
            res <span style="color: #333333">=</span> pow(<span style="color: #0000DD; font-weight: bold">3</span>, n <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">3</span> <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>) <span style="color: #333333">*</span> <span style="color: #0000DD; font-weight: bold">4</span>;
        }
        <span style="color: #008800; font-weight: bold">return</span> res;
    }
};

<span style="color: #888888">// Time:  O(n)</span>
<span style="color: #888888">// Space: O(1)</span>
<span style="color: #888888">// DP solution.</span>
<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Solution2</span> {
<span style="color: #008800; font-weight: bold">public</span><span style="color: #333333">:</span>
    <span style="color: #333399; font-weight: bold">int</span> integerBreak(<span style="color: #333399; font-weight: bold">int</span> n) {
        <span style="color: #008800; font-weight: bold">if</span> (n <span style="color: #333333">&lt;</span> <span style="color: #0000DD; font-weight: bold">4</span>) {
            <span style="color: #008800; font-weight: bold">return</span> n <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>;
        }

        <span style="color: #888888">// integerBreak(n) = max(integerBreak(n - 2) * 2, integerBreak(n - 3) * 3)</span>
        vector<span style="color: #333333">&lt;</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">&gt;</span> res{<span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">1</span>, <span style="color: #0000DD; font-weight: bold">2</span>, <span style="color: #0000DD; font-weight: bold">3</span>};
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">4</span>; i <span style="color: #333333">&lt;=</span> n; <span style="color: #333333">++</span>i) {
            res[i <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">4</span>] <span style="color: #333333">=</span> max(res[(i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">2</span>) <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">4</span>] <span style="color: #333333">*</span> <span style="color: #0000DD; font-weight: bold">2</span>, res[(i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">3</span>) <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">4</span>] <span style="color: #333333">*</span> <span style="color: #0000DD; font-weight: bold">3</span>);
        }
        <span style="color: #008800; font-weight: bold">return</span> res[n <span style="color: #333333">%</span> <span style="color: #0000DD; font-weight: bold">4</span>];
    }
};
</pre></div>
